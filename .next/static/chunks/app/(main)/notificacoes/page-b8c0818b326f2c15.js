(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{1256:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(5155),a=t(2115),o=t(2108),n=t(4684),i=t(3568);function c(){let{data:e}=(0,o.useSession)(),[r,t]=(0,a.useState)([]),[c,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/notifications");if(!e.ok)throw Error("Erro ao buscar notifica\xe7\xf5es");let r=await e.json();t(r)}catch(e){console.error("Erro ao buscar notifica\xe7\xf5es:",e),i.Ay.error("N\xe3o foi poss\xedvel carregar as notifica\xe7\xf5es")}finally{l(!1)}})()},[]);let d=async e=>{try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[e]})})).ok)throw Error("Erro ao marcar notifica\xe7\xe3o como lida");t(r=>r.map(r=>r.id===e?{...r,read:!0}:r)),i.Ay.success("Notifica\xe7\xe3o marcada como lida")}catch(e){console.error("Erro ao marcar notifica\xe7\xe3o como lida:",e),i.Ay.error("N\xe3o foi poss\xedvel marcar a notifica\xe7\xe3o como lida")}},m=async()=>{try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[]})})).ok)throw Error("Erro ao marcar notifica\xe7\xf5es como lidas");t(e=>e.map(e=>({...e,read:!0}))),i.Ay.success("Todas as notifica\xe7\xf5es marcadas como lidas")}catch(e){console.error("Erro ao marcar notifica\xe7\xf5es como lidas:",e),i.Ay.error("N\xe3o foi poss\xedvel marcar as notifica\xe7\xf5es como lidas")}},h=e=>{let r=new Date(e),t=Math.floor((new Date().getTime()-r.getTime())/1e3),s=Math.floor(t/60),a=Math.floor(s/60),o=Math.floor(a/24);return t<60?"agora mesmo":s<60?"".concat(s," ").concat(1===s?"minuto":"minutos"," atr\xe1s"):a<24?"".concat(a," ").concat(1===a?"hora":"horas"," atr\xe1s"):o<7?"".concat(o," ").concat(1===o?"dia":"dias"," atr\xe1s"):r.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})},u=e=>{switch(e){case"BID":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"COUNTER_OFFER":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-yellow-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})});case"ACCEPTANCE":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"REJECTION":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});case"SERVICE_COMPLETION":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"REVIEW":return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})});default:return(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}};return(0,s.jsx)(n.q,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-secondary-900",children:"Notifica\xe7\xf5es"}),r.length>0&&(0,s.jsx)("button",{onClick:m,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Marcar todas como lidas"})]}),c?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{children:"Carregando notifica\xe7\xf5es..."})}):0===r.length?(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 text-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-secondary-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,s.jsx)("h3",{className:"text-xl font-medium text-secondary-900 mb-2",children:"Nenhuma notifica\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-secondary-600",children:"Voc\xea n\xe3o tem notifica\xe7\xf5es no momento."})]}):(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsx)("div",{className:"bg-white shadow-md rounded-lg p-4 ".concat(e.read?"":"border-l-4 border-primary-500"),children:(0,s.jsxs)("div",{className:"flex items-start",children:[u(e.type),(0,s.jsxs)("div",{className:"ml-3 flex-grow",children:[(0,s.jsx)("p",{className:"text-secondary-900 ".concat(e.read?"":"font-medium"),children:e.message}),(0,s.jsx)("p",{className:"text-secondary-500 text-sm mt-1",children:h(e.createdAt)})]}),!e.read&&(0,s.jsx)("button",{onClick:()=>d(e.id),className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Marcar como lida"})]})},e.id))})]})})}},3611:(e,r,t)=>{Promise.resolve().then(t.bind(t,1256))},4684:(e,r,t)=>{"use strict";t.d(r,{q:()=>i});var s=t(5155),a=t(2108),o=t(5695),n=t(2115);function i(e){let{children:r}=e,{data:t,status:i}=(0,a.useSession)(),c=(0,o.useRouter)(),l=(0,o.usePathname)();return((0,n.useEffect)(()=>{"unauthenticated"===i&&c.push("/auth/login?callbackUrl=".concat(encodeURIComponent(l)))},[i,c,l]),"loading"===i)?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,s.jsx)("p",{children:"Carregando..."})}):t?(0,s.jsx)(s.Fragment,{children:r}):null}},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var r=r=>e(e.s=r);e.O(0,[2108,3568,8441,1684,7358],()=>r(3611)),_N_E=e.O()}]);